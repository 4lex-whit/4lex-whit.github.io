<!DOCTYPE html>

<html>
	<head>
		<title>Databases</title>
		<link rel="stylesheet" href="../main.css" />
	</head>

	<body>
		<header>
			<h1 id="title">Databases</h1>
			<h4 id="menu-link"><a href="../index.html">Menu</a></h4>
		</header>

		<main>
			<!-- Contents -->
			<div class="border_left">
				<h2>Contents</h2>
				<ol>
					<li><a href="#keys">Keys</a></li>
					<li><a href="#referential-integrity">Referential Integrity</a></li>
					<li><a href="#normalisation">Normalisation</a></li>
				</ol>
			</div>

			<!-- Keys -->
			<div id="keys" class="border_left">
				<h2>Keys</h2>

				<div class="list">
					<ol>
						<li><a href="#keys-primary">Primary Keys</a></li>
						<li><a href="#keys-foreign">Foreign Keys</a></li>
						<li><a href="#keys-composite">Composite Keys</a></li>
						<li><a href="#keys-secondary">Secondary Keys</a></li>
					</ol>
				</div>

				<!-- Primary Keys -->
				<div id="keys-primary" class="item">
					<h3>Primary Keys</h3>
					<p>Each record must have a <em>Primary Key</em>. They are used to identify each record, and therefore must be <strong>unique</strong>. They also <strong>cannot be null</strong>, as they then wouldn't be unique.</p>
				</div>

				<!-- Foreign Keys -->
				<div id="keys-foreign" class="item">
					<h3>Foreign Keys</h3>
					<p>A <em>Foreign Key</em> is used to reference a <strong>primary key</strong> from another table. Unlike primary keys, a foreign key can have a value of null, as they can repeat.</p>
					<p>For example, a database used for a college might have two tables - one for courses and one for students. To avoid repeating data, the students table would use the course IDs as a foreign key to keep track of the courses students are enrolled in.</p>
				</div>

				<!-- Composite Keys -->
				<div id="keys-composite" class="item">
					<h3>Composite Keys</h3>
					<p>A <em>Composite Key</em> is when two or more <strong>fields</strong> are combined to make a <strong>primary key</strong>. These fields can be foreign keys, but do not have to be.</p>
					<p>For example, a database used for a library might combine the customer's ID, the book's ISBN, and the date to make a unique primary key.</p>
				</div>

				<!-- Secondary Keys -->
				<div id="keys-secondary" class="item">
					<h3>Secondary Keys</h3>
					<p>A <em>Secondary Key</em> is a <strong>field</strong> used for <strong>sorting</strong> and/or <strong>searching</strong>. They can be foreign keys, but do not have to be.</p>
					<p>For example, a database used for a company might have a table of employees which contains a <em>Surname</em> field. This is both used to store essential information, but also to sort and search through all the employees.</p>
				</div>
			</div>

			<!-- Referential Integrity -->
			<div id="referential-integrity" class="border_left">
				<h2>Referential Integrity</h2>

				<div class="list">
					<ol>
						<li><a href="#referential-integrity_what-is">What is Referential Integrity?</a></li>
						<li><a href="#referential-integrity_advantages">Advantages</a></li>
						<li><a href="#referential-integrity_disadvantages">Disadvantages</a></li>
					</ol>
				</div>

				<!-- What is Referential Integrity -->
				<div id="referential-integrity_what-is" class="item">
					<h3>What is Referential Integrity?</h3>
					<p><em>Referential Integrity</em> is a rule that can be applied to a relational database in order to maintain valid relationships between tables. This rule states <strong>the value in a foreign key field must either reference a valid primary key, or be null</strong>.</p>
					<p>It's an essential rule to follow - especially when working with larger databases - as primary keys will inevitably be updated or deleted, and foreign keys (if not updated accordingly) will end up referencing non-existent values. Due to those records not having a valid reference, they now becomes lost in the database as they won't show up in new queries, and will waste storage space.</p>
				</div>

				<!-- Advantages -->
				<div id="referential-integrity_advantages" class="item">
					<h3>Advantages</h3>
					<ul>
						<li>Keeps data consistent and accurate</li>
						<li>Prevents orphaned records</li>
					</ul>
				</div>

				<!-- Disadvantages -->
				<div id="referential-integrity_disadvantages" class="item">
					<h3>Disadvantages</h3>
					<ul>
						<li>Can impact performance due to additional checks</li>
						<li>Will require additional planning and design</li>
					</ul>
				</div>
			</div>

			<!-- Normalisation -->
			<div id="normalisation" class="border_left">
				<h2>Normalisation</h2>

				<div class="list">
					<ol>
						<li><a href="#normalisation_first-form">First Normal Form (1NF)</a></li>
						<li><a href="#normalisation_second-form">Second Normal Form (2NF)</a></li>
						<li><a href="#normalisation_third-form">Third Normal Form (3NF)</a></li>
					</ol>
				</div>

				<!-- First Normal Form (1NF) -->
				<div id="normalisation_first-form" class="item">
					<h3>First Normal Form (1NF)</h3>

					<h4>Rules</h4>
					<ul>
						<li>
							Fields must be <strong>atomised</strong><br>
							<em>&nbsp;- broken up into their smallest parts</em>
						</li>
						<li>Records must have a <strong>primary key</strong></li>
						<li>There must be <strong>no duplicate records</strong></li>
						<li>Fields must <strong>not repeat</strong></li>
					</ul>

					<h4>Steps</h4>
					<ol>
						<li>Identify the repeating groups of fields</li>
						<li>Move these fields into a new table</li>
						<li>Identify a new primary key for the group of fields</li>
						<li>Reference the new primary key as a foreign key in the original table</li>
					</ol>

					<h4>Example</h4>
					<table>
						<tr>
							<th>Name</th>
							<th>Phone</th>
							<th>Country</th>
						</tr>
						<tr>
							<td>Alex Whitaker</td>
							<td>07973 929122</td>
							<td>United Kingdom</td>
						</tr>
						<tr>
							<td>Dairy Rat</td>
							<td>01902 747467</td>
							<td>United Kingdom</td>
						</tr>
						<tr>
							<td>Asteroid Rat</td>
							<td>01902 747467</td>
							<td>United Kingdom</td>
						</tr>
						<tr>
							<td>Cassette Rat</td>
							<td>01902 747467</td>
							<td>United Kingdom</td>
						</tr>
					</table>

					<p>The table above is not in 1NF for two reasons. First, there is no primary key. Second, the <em>Name</em> field is not atomised.</p>

					<table>
						<tr>
							<th>User_ID</th>
							<th>Forename</th>
							<th>Surname</th>
							<th>Phone</th>
							<th>Country</th>
						</tr>
						<tr>
							<td>00001</td>
							<td>Alex</td>
							<td>Whitaker</td>
							<td>07973 929122</td>
							<td>United Kingdom</td>
						</tr>
						<tr>
							<td>00002</td>
							<td>Dairy</td>
							<td>Rat</td>
							<td>01902 747467</td>
							<td>United Kingdom</td>
						</tr>
						<tr>
							<td>00003</td>
							<td>Asteroid</td>
							<td>Rat</td>
							<td>01902 747467</td>
							<td>United Kingdom</td>
						</tr>
						<tr>
							<td>00004</td>
							<td>Cassette</td>
							<td>Rat</td>
							<td>01902 747467</td>
							<td>United Kingdom</td>
						</tr>
					</table>

					<p>This is the table after being normalised to 1NF. It now has a <em>User_ID</em> field which is the primary key, and the <em>Name</em> field has been atomised into a <em>Forename</em> and <em>Surname</em> field.</p>
				</div>

				<!-- Second Normal Form (2NF) -->
				<div id="normalisation_second-form" class="item">
					<h3>Second Normal Form (2NF)</h3>

					<h4>Rules</h4>
					<ul>
						<li>The table must be in <strong>1NF</strong></li>
						<li>
							There must be <strong>no partial dependencies</strong><br>
							<em>&nbsp;- fields that only depend on a part of a composite key</em>
						</li>
					</ul>

					<h4>Steps</h4>
					<ol>
						<li>Identify any fields dependent on only part of the composite key</li>
						<li>Move these fields into a new table</li>
						<li>Use the dependent part of the composite key as the primary key for the new table</li>
						<li>Reference the new primary key as a foreign key in the composite key in the original table</li>
					</ol>

					<h4>Example</h4>
					<table>
						<tr>
							<th>Customer_ID</th>
							<th>Media_ID</th>
							<th>Date_Time</th>
							<th>Title</th>
							<th>Release_Year</th>
							<th>Due_Date</th>
							<th>Returned_Date</th>
						</tr>
						<tr>
							<td>00921</td>
							<td>10023</td>
							<td>2023-11-28T18:47:21</td>
							<td>Heat</td>
							<td>1995</td>
							<td>2023-12-11</td>
							<td>2023-12-07</td>
						</tr>
						<tr>
							<td>02036</td>
							<td>38275</td>
							<td>2024-03-09T16:58:12</td>
							<td>Challengers</td>
							<td>2024</td>
							<td>2024-03-23</td>
							<td>2024-03-14</td>
						</tr>
						<tr>
							<td>00293</td>
							<td>00346</td>
							<td>2024-10-31T22:32:09</td>
							<td>Alien</td>
							<td>1979</td>
							<td>2024-11-14</td>
							<td>2023-11-18</td>
						</tr>						
					</table>

					<p>The table above is not in 2NF as it contains multiple partial dependencies. Both fields <em>Title</em> and <em>Release_Year</em> only depend on the <em>Media_ID</em> field from the composite key.</p>

					<table>
						<tr>
							<th>Customer_ID</th>
							<th>Media_ID</th>
							<th>Date_Time</th>
							<th>Due_Date</th>
							<th>Returned_Date</th>
						</tr>
						<tr>
							<td>00921</td>
							<td>10023</td>
							<td>2023-11-28T18:47:21</td>
							<td>2023-12-11</td>
							<td>2023-12-07</td>
						</tr>
						<tr>
							<td>02036</td>
							<td>38275</td>
							<td>2024-03-09T16:58:12</td>
							<td>2024-03-23</td>
							<td>2024-03-14</td>
						</tr>
						<tr>
							<td>00293</td>
							<td>00346</td>
							<td>2024-10-31T22:32:09</td>
							<td>2024-11-14</td>
							<td>2023-11-18</td>
						</tr>						
					</table>

					<br>
					
					<table>
						<tr>
							<th>Media_ID</th>
							<th>Title</th>
							<th>Release_Year</th>
						</tr>
						<tr>
							<td>10023</td>
							<td>Heat</td>
							<td>1995</td>
						</tr>
						<tr>
							<td>38275</td>
							<td>Challengers</td>
							<td>2024</td>
						</tr>
						<tr>
							<td>00346</td>
							<td>Alien</td>
							<td>1979</td>
						</tr>						
					</table>

					<p>These are the tables after being normalised to 2NF. The fields with partial dependencies have been moved to a new table, with the dependency as the primary key. This primary key is then referenced as a foreign key in the composite key in the original table.</p>
				</div>

				<!-- Third Normal Form (3NF) -->
				<div id="normalisation_third-form" class="item">
					<h3>Third Normal Form (3NF)</h3>

					<h4>Rules</h4>
					<ul>
						<li>The table must be in <strong>2NF</strong></li>
						<li>
							There must be <strong>no transitive dependencies</strong><br>
							<em>&nbsp;- fields that only depend on other non-key fields</em>
						</li>
					</ul>

					<h4>Steps</h4>
					<ol>
						<li>Identify any fields dependent on other non-key field</li>
						<li>Move these fields into a new table</li>
						<li>Use the dependent field as the primary key for the new table</li>
						<li>Reference the new primary key as a foreign key in the original table</li>
					</ol>

					<h4>Example</h4>
					<table>
						<tr>
							<th>ISBN</th>
							<th>Room_ID</th>
							<th>Category_ID</th>
							<th>Category_Description</th>
						</tr>
						<tr>
							<td>0-374-29921-8</td>
							<td>A3</td>
							<td>04</td>
							<td>coming-of-age</td>
						</tr>
						<tr>
							<td>978-1526604965</td>
							<td>D2</td>
							<td>12</td>
							<td>queer</td>
						</tr>	
						<tr>
							<td>44800071</td>
							<td>A1</td>
							<td>12</td>
							<td>queer</td>
						</tr>
					</table>

					<p>The table above is not in 3NF as it contains transitive dependencies, as the field <em>Category_Description</em> only depends on <em>Category_ID</em>, another non-key field.

					<table>
						<tr>
							<th>ISBN</th>
							<th>Room_ID</th>
							<th>Category_ID</th>
						</tr>
						<tr>
							<td>0-374-29921-8</td>
							<td>A3</td>
							<td>04</td>
						</tr>
						<tr>
							<td>978-1526604965</td>
							<td>D2</td>
							<td>12</td>
						</tr>	
						<tr>
							<td>44800071</td>
							<td>A1</td>
							<td>12</td>
						</tr>
					</table>

					<br>

					<table>
						<tr>
							<th>Category_ID</th>
							<th>Category_Description</th>
						</tr>
						<tr>
							<td>04</td>
							<td>coming-of-age</td>
						</tr>
						<tr>
							<td>12</td>
							<td>queer</td>
						</tr>
					</table>

					<p>These are the tables after being normalised to 3NF. The fields with transitive dependencies have been moved to a new table, with the dependency as the primary key. This primary key is then referenced as a foreign key in the original table.</p>
				</div>
			</div>
		</main>
	</body>
</html>
